<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE supplementalData SYSTEM "../../common/dtd/ldmlSupplemental.dtd">
<supplementalData>
  <transforms>
    <transform
      source="ru"
      target="ru_Latn"
      variant="FR"
      direction="forward"
      draft="unconfirmed"
      alias="Russian-Latin/FR ru-Latn-t-ru-m0-fr">
      <tRule><![CDATA[
::NFC;

# =========================
# Variables
# =========================
$wordBoundary = [^[:L:][:M:][:N:]];
$upperVowels  = [АЕЁЭИОУЫЮЯ];
$lowerVowels  = [аеёэиоуыюя];
$vowels       = [$upperVowels $lowerVowels];
$upper        = [:Uppercase:];
$lower        = [:Lowercase:];
$ZSTC         = [ЗзСсТтЦц];
$CHSH         = [ЧчШшЩщЖж];
$IJ           = [ИиЙй];
$Front        = [ЕеИиЫыЭэ];
$FrontUpper   = [ЕИЫЭ];
$FrontLower   = [еиыэ];

# =========================
# Core contextual rules (French Wikipedia)
# =========================

# --- Г: gu before e/i/ы; else g ---
Г } $FrontLower → Gu;
Г } $FrontUpper → GU;
г } $FrontLower → gu;
г } $FrontUpper → gu;

# --- Е (E) ---
# after consonant → e
[$upper-$upperVowels] { Е } → E;
[$lower-$lowerVowels] { е } → e;

# after И/Й → e
$IJ { Е } → E;
$IJ { е } → e;

# after soft/hard sign → ie
Ь { Е } $lower → ie;
Ь { Е } [^$lower] → IE;
ь { е } → ie;
Ъ { Е } $lower → ie;
Ъ { Е } [^$lower] → IE;
ъ { е } → ie;

# word-initial default (Wikipedia): Ie
$wordBoundary { Е } $lower → Ie;
$wordBoundary { Е } [^$lower] → IE;
$wordBoundary { е } → ie;

# after vowel (≠ и/й) → ïe
[$vowels-[Ии]] { Е } $lower → ïe;
[$vowels-[Ии]] { Е } [^$lower] → ÏE;
[$vowels-[Ии]] { е } → ïe;

# --- Ё (YO) ---
# default io with right-case
Ё } $lower → io;
Ё } [^$lower] → IO;
ё → io;
# convention admitted: after sibilants map to e (e.g., Gorbatchev)
$CHSH { Ё } → e;
$CHSH { ё } → e;

# --- И (I) ---
# after vowel (≠ и) → ï
[$vowels-[Ии]] { И } → Ï;
[$vowels-[Ии]] { и } → ï;

# --- Й (JOT) ---
# finals
ий $ → i;
Ий $ → i;
ый $ → y;
Ый $ → y;
# suppress in ...ьев / ...иев cluster
[ИиЬь] { Й } [Ее] → ;
# otherwise ï
Й → Ï;
й → ï;

# --- Ю (YU) ---
# after И/Й → ou
$IJ { Ю } $lower → ou;
$IJ { Ю } [^$lower] → OU;
$IJ { ю } → ou;
# after other vowel:
# front vowels (ЕЭИЯЮ) → ïou ; back vowels (АОУЫ) → you
[ЕЭИЯЮеэияю] { Ю } $lower → ïou;
[ЕЭИЯЮеэияю] { Ю } [^$lower] → ÏOU;
[ЕЭИЯЮеэияю] { ю } → ïou;
[АОУЫаоуы] { Ю } $lower → you;
[АОУЫаоуы] { Ю } [^$lower] → YOU;
[АОУЫаоуы] { ю } → you;
# elsewhere (initial/after consonant) → iou
Ю } $lower → iou;
Ю } [^$lower] → IOU;
ю → iou;

# --- Я (YA) ---
# after И/Й → a
$IJ { Я } $lower → a;
$IJ { Я } [^$lower] → A;
$IJ { я } → a;
# after other vowel → ïa
[$vowels-$IJ] { Я } $lower → ïa;
[$vowels-$IJ] { Я } [^$lower] → ÏA;
[$vowels-$IJ] { я } → ïa;
# word-initial convention admitted: Ya
$wordBoundary { Я } $lower → Ya;
$wordBoundary { Я } [^$lower] → YA;
$wordBoundary { я } → ya;
# elsewhere (after consonant) → ia
Я } $lower → ia;
Я } [^$lower] → IA;
я → ia;

# --- С between vowels → ss ---
$vowels { С } $vowels → ss;
$vowels { с } $vowels → ss;

# --- Н final after и/ы → ne (lowercase words only) ---
[иы] { н } $ → ne;
[иы] { н } $wordBoundary → ne;

# --- Final -ев (Tourgueniev, Prokofiev) → -iev ---
ЕВ $ → iev;
ев $ → iev;

# =========================
# Simple letters and digraphs (with titlecasing)
# =========================
А → A;
а → a;
Б → B;
б → b;
В → V;
в → v;
Г → G;
г → g;
Д → D;
д → d;
Е → E;
е → e;
Ж → J;
ж → j;
З → Z;
з → z;
И → I;
и → i;
К → K;
к → k;
Л → L;
л → l;
М → M;
м → m;
Н → N;
н → n;
О → O;
о → o;
П → P;
п → p;
Р → R;
р → r;
С → S;
с → s;
Т → T;
т → t;

У } $lower → ou;
У } [^$lower] → OU;
у → ou;

Х } $lower → kh;
Х } [^$lower] → KH;
х → kh;

Ц } $lower → ts;
Ц } [^$lower] → TS;
ц → ts;

Ч } $lower → tch;
Ч } [^$lower] → TCH;
ч → tch;

Ш } $lower → ch;
Ш } [^$lower] → CH;
ш → ch;

Щ } $lower → chtch;
Щ } [^$lower] → CHTCH;
щ → chtch;

Ъ → ;
ъ → ;
Ы → y;
ы → y;
Ь → ;
ь → ;
Э } $lower → e;
Э } [^$lower] → E;
э → e;

::NFC;
      ]]></tRule>
    </transform>
  </transforms>
</supplementalData>
