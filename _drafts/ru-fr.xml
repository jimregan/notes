<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE supplementalData SYSTEM "../../common/dtd/ldmlSupplemental.dtd">
<supplementalData>
  <version number="$Revision: 1 $"/>
  <transforms>
    <!-- Russian → French transcription (based on fr.wikipedia.org/wiki/Transcription_du_russe_en_français).
         Primary forms only (no “convention admise / variantes”).
         Draft: contributed -->
    <transform source="ru" target="ru_Latn" variant="FR" direction="forward"
               alias="Russian-Latin/French ru-Latn-t-ru-m0-fr" draft="contributed">
      <tRule><![CDATA[
# ==========================================================================
# Minimal filter (Russian letters only), NFC normalization
::[АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюя];
::NFC;

# --------------------------------------------------------------------------
# Character classes
$U = [:Uppercase:];
$L = [:Lowercase:];
$upperV = [АЕЁИОУЫЭЮЯ];
$lowerV = [аеёиоуыэюя];
$vowels  = [$upperV $lowerV];
$conson  = [БВГДЖЗЙКЛМНПРСТФХЦЧШЩбвгджзйклмнпрстфхцчшщ];

# Word boundary helper (matches non-letters/numbers marks)
$WB = [^[:L:][:M:][:N:]];

# --------------------------------------------------------------------------
# G (г) → “gu” before e, и, ы; else “g”  (table lines 131–133)  [fr wiki]
# handle uppercase/lowercase carefully
г { [еЕиИыЫ] > gu;
Г { [еЕиИыЫ] > Gu;
# default
Г > G;
г > g;

# --------------------------------------------------------------------------
# E (Е е)  (table lines 135–145)
# after vowel other than и/й → “ïe”; after ь or ъ → “ie”;
# at word start → “Ie/ie”; after consonant or after и/й → “e”.
# 1) word-initial
$WB { Е } $U > IE;
$WB { е } > ie;
# 2) after ь or ъ
[ЬьЪъ] { Е > Ie;
[ЬьЪъ] { е > ie;
# 3) after a vowel that is not и/й  → ïe
[АаЕеЁёОоУуЫыЭэЮюЯя] { Е > Ïe;
[АаЕеЁёОоУуЫыЭэЮюЯя] { е > ïe;
# 4) default (after consonant, or after и/й)
Е > E;
е > e;

# --------------------------------------------------------------------------
# YO (Ё ё) → “io” (table lines 145–147)
# word-initial capitalization
$WB { Ё } $U > Io;
$WB { ё } > io;
# default
Ё > Io;
ё > io;

# --------------------------------------------------------------------------
# Ж ж → j (line 149)
Ж > J;
ж > j;

# З з → z (line 150)
З > Z;
з > z;

# --------------------------------------------------------------------------
# И и → “ï” after a preceding vowel (other than и), else “i” (lines 151–152)
[АаЕеЁёОоУуЫыЭэЮюЯя] { И > Ï;
[АаЕеЁёОоУуЫыЭэЮюЯя] { и > ï;
# default
И > I;
и > i;

# --------------------------------------------------------------------------
# Й й (lines 153–156)
# Final -ий → i ; final -ый → y ; else → ï
И } $WB ← i;   # helper: will match in “-ий” rule below
Ы } $WB ← y;
ий } $WB > i;
ый } $WB > y;
Й > Ï;
й > ï;

# --------------------------------------------------------------------------
# К к, Л л, М м (lines 157–160)
К > K; к > k;
Л > L; л > l;
М > M; м > m;

# --------------------------------------------------------------------------
# Н н → “ne” word-final after и/ы; else “n” (lines 161–164)
[ИиЫы] { Н } $WB > ne;
н } $WB < n;   # ensure plain 'n' at word end
Н > N;  н > n;

# --------------------------------------------------------------------------
# О о (165)
О > O; о > o;

# П п (166)
П > P; п > p;

# Р р (167)
Р > R; р > r;

# --------------------------------------------------------------------------
# С с → “ss” between vowels; else “s” (lines 168–169)
$vowels { С } $vowels > ss;
$vowels { с } $vowels > ss;
С > S;  с > s;

# --------------------------------------------------------------------------
# Т т (170)
Т > T; т > t;

# --------------------------------------------------------------------------
# У у → “ou” (lines 171–173; we ignore the optional ‘u’ variant)
У > Ou; у > ou;

# --------------------------------------------------------------------------
# Ф ф (174)
Ф > F; ф > f;

# --------------------------------------------------------------------------
# Х х → “kh” (175–176)
Х > Kh; х > kh;

# --------------------------------------------------------------------------
# Ц ц → “ts” (177)
Ц > Ts; ц > ts;

# --------------------------------------------------------------------------
# Ч ч → “tch” (178)
Ч > Tch; ч > tch;

# --------------------------------------------------------------------------
# Ш ш → “ch” (179)
Ш > Ch; ш > ch;

# --------------------------------------------------------------------------
# Щ щ → “chtch” (180)
Щ > Chtch; щ > chtch;

# --------------------------------------------------------------------------
# Ъ ъ, Ь ь are not transcribed (lines 181–185)
Ъ > ;  ъ > ;
Ь > ;  ь > ;

# --------------------------------------------------------------------------
# Ы ы → “y” (line 183)
Ы > Y;  ы > y;

# --------------------------------------------------------------------------
# Э э → “e” (line 186)
Э > E;  э > e;

# --------------------------------------------------------------------------
# Ю ю (lines 187–191)
# after и/й → “ou”; after other vowel → “ïou”; otherwise → “iou”
[ИиЙй] { Ю > Ou;   [ИиЙй] { ю > ou;
[АаЕеЁёОоУуЫыЭэЮюЯя] { Ю > Ïou;
[АаЕеЁёОоУуЫыЭэЮюЯя] { ю > ïou;
Ю > Iou;  ю > iou;

# --------------------------------------------------------------------------
# Я я (lines 192–197)
# after и/й → “a”; after other vowel → “ïa”; otherwise → “ia”
[ИиЙй] { Я > A;   [ИиЙй] { я > a;
[АаЕеЁёОоУуЫыЭэЮюЯя] { Я > Ïa;
[АаЕеЁёОоУуЫыЭэЮюЯя] { я > ïa;
Я > Ia;  я > ia;

# --------------------------------------------------------------------------
# Final cleanup normalization
::NFC;
      ]]></tRule>
    </transform>
  </transforms>
</supplementalData>
