<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Training spaCy on IDT | notes</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Training spaCy on IDT" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve forgotten where I put the output model, though" />
<meta property="og:description" content="I’ve forgotten where I put the output model, though" />
<link rel="canonical" href="https://jimregan.github.io/notes/spacy/idt/2020/09/14/train-spacy-idt.html" />
<meta property="og:url" content="https://jimregan.github.io/notes/spacy/idt/2020/09/14/train-spacy-idt.html" />
<meta property="og:site_name" content="notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-14T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://jimregan.github.io/notes/spacy/idt/2020/09/14/train-spacy-idt.html","@type":"BlogPosting","headline":"Training spaCy on IDT","dateModified":"2020-09-14T00:00:00-05:00","datePublished":"2020-09-14T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jimregan.github.io/notes/spacy/idt/2020/09/14/train-spacy-idt.html"},"description":"I’ve forgotten where I put the output model, though","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/notes/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jimregan.github.io/notes/feed.xml" title="notes" /><link rel="shortcut icon" type="image/x-icon" href="/notes/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper">
    <a class="site-title" rel="author" href="/notes/">notes</a>
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon"></span>
        </label>

        <div class="nav-items">
  <a class="nav-item" href="/notes/about/">About Me</a>
  <a class="nav-item" href="/notes/search/">Search</a>
  <a class="nav-item" href="/notes/categories/">Tags</a>
</div>

      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Training spaCy on IDT</h1><p class="page-description">I've forgotten where I put the output model, though</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-09-14T00:00:00-05:00" itemprop="datePublished">
        Sep 14, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      7 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/notes/categories/#spacy">spacy</a>
        &nbsp;
      
        <a class="category-tags-link" href="/notes/categories/#idt">idt</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/jimregan/notes/tree/master/_notebooks/2020-09-14-train-spacy-idt.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/notes/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/jimregan/notes/master?filepath=_notebooks%2F2020-09-14-train-spacy-idt.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/notes/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/jimregan/notes/blob/master/_notebooks/2020-09-14-train-spacy-idt.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/notes/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-09-14-train-spacy-idt.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git clone https://github.com/UniversalDependencies/UD_Irish-IDT
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Cloning into &#39;UD_Irish-IDT&#39;...
remote: Enumerating objects: 32, done.
remote: Counting objects: 100% (32/32), done.
remote: Compressing objects: 100% (23/23), done.
remote: Total 328 (delta 14), reused 25 (delta 9), pack-reused 296
Receiving objects: 100% (328/328), 3.63 MiB | 12.73 MiB/s, done.
Resolving deltas: 100% (182/182), done.
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>mkdir idt-json
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>python -m spacy convert /content/UD_Irish-IDT/ga_idt-ud-train.conllu /content/idt-json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-fg">✔ Generated output file (2019 documents):
/content/idt-json/ga_idt-ud-train.json</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>python -m spacy convert /content/UD_Irish-IDT/ga_idt-ud-dev.conllu /content/idt-json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-fg">✔ Generated output file (451 documents):
/content/idt-json/ga_idt-ud-dev.json</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>wget https://dl.fbaipublicfiles.com/fasttext/vectors-crawl/cc.ga.300.vec.gz
<span class="o">!</span>python -m spacy init-model ga /content/ga_vectors_cc --vectors-loc cc.ga.300.vec.gz
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--2020-09-14 17:16:11--  https://dl.fbaipublicfiles.com/fasttext/vectors-crawl/cc.ga.300.vec.gz
Resolving dl.fbaipublicfiles.com (dl.fbaipublicfiles.com)... 172.67.9.4, 104.22.75.142, 104.22.74.142, ...
Connecting to dl.fbaipublicfiles.com (dl.fbaipublicfiles.com)|172.67.9.4|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 184422000 (176M) [binary/octet-stream]
Saving to: ‘cc.ga.300.vec.gz’

cc.ga.300.vec.gz    100%[===================&gt;] 175.88M  44.2MB/s    in 4.0s    

2020-09-14 17:16:16 (43.8 MB/s) - ‘cc.ga.300.vec.gz’ saved [184422000/184422000]

<span class="ansi-green-fg">✔ Successfully created model</span>
316836it [00:27, 11398.56it/s]
<span class="ansi-green-fg">✔ Loaded vectors from cc.ga.300.vec.gz</span>
<span class="ansi-green-fg">✔ Sucessfully compiled vocab</span>
317041 entries, 316836 vectors
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>WikiANN is currently only available through <a href="https://drive.google.com/drive/folders/1Q-xdT99SeaCghihGa7nRkcXGwRGUIsKN?usp=sharing">Google Drive</a></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">drive</span>
<span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;/gdrive&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Mounted at /gdrive
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cp /gdrive/My<span class="se">\ </span>Drive/ga.tar.gz .
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tar zxvf ga.tar.gz
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>README.txt
wikiann-ga.bio
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>wget http://downloads.dbpedia.org/links/resources/wikidatadump/2017-07-07/enwiki/20170701/enwiki-20170701-interlanguage-links_wikidataorg.ttl
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--2020-09-14 17:15:11--  http://downloads.dbpedia.org/links/resources/wikidatadump/2017-07-07/enwiki/20170701/enwiki-20170701-interlanguage-links_wikidataorg.ttl
Resolving downloads.dbpedia.org (downloads.dbpedia.org)... 139.18.16.66
Connecting to downloads.dbpedia.org (downloads.dbpedia.org)|139.18.16.66|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1020894244 (974M) [text/turtle]
Saving to: ‘enwiki-20170701-interlanguage-links_wikidataorg.ttl’

enwiki-20170701-int 100%[===================&gt;] 973.60M  18.7MB/s    in 54s     

2020-09-14 17:16:05 (18.1 MB/s) - ‘enwiki-20170701-interlanguage-links_wikidataorg.ttl’ saved [1020894244/1020894244]

</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat wikiann-ga.bio <span class="p">|</span> awk <span class="s1">&#39;(NF == 7){print $6}&#39;</span><span class="p">|</span>sort<span class="p">|</span>uniq<span class="p">|</span><span class="k">while</span> <span class="nb">read</span> i<span class="p">;</span><span class="k">do</span> grep <span class="s2">&quot;/</span><span class="nv">$i</span><span class="s2">&gt;&quot;</span> enwiki-20170701-interlanguage-links_wikidataorg.ttl &gt;&gt; filtered<span class="p">;</span><span class="k">done</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install danlp 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting danlp
  Downloading https://files.pythonhosted.org/packages/3c/79/96d0d3f3634ce75787d408383fa81cdd854552e27e4e279a985b511a6d88/danlp-0.0.9-py3-none-any.whl
Collecting pyconll
  Downloading https://files.pythonhosted.org/packages/2c/6e/c325d0db05ac1b8d45645de903e4ba691d419e861c915c3d4ebfcaf8ac25/pyconll-2.2.1-py3-none-any.whl
Requirement already satisfied: tqdm in /usr/local/lib/python3.6/dist-packages (from danlp) (4.41.1)
Requirement already satisfied: tweepy in /usr/local/lib/python3.6/dist-packages (from danlp) (3.6.0)
Requirement already satisfied: requests&gt;=2.21 in /usr/local/lib/python3.6/dist-packages (from pyconll-&gt;danlp) (2.23.0)
Requirement already satisfied: six&gt;=1.10.0 in /usr/local/lib/python3.6/dist-packages (from tweepy-&gt;danlp) (1.15.0)
Requirement already satisfied: PySocks&gt;=1.5.7 in /usr/local/lib/python3.6/dist-packages (from tweepy-&gt;danlp) (1.7.1)
Requirement already satisfied: requests-oauthlib&gt;=0.7.0 in /usr/local/lib/python3.6/dist-packages (from tweepy-&gt;danlp) (1.3.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.6/dist-packages (from requests&gt;=2.21-&gt;pyconll-&gt;danlp) (2020.6.20)
Requirement already satisfied: idna&lt;3,&gt;=2.5 in /usr/local/lib/python3.6/dist-packages (from requests&gt;=2.21-&gt;pyconll-&gt;danlp) (2.10)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in /usr/local/lib/python3.6/dist-packages (from requests&gt;=2.21-&gt;pyconll-&gt;danlp) (1.24.3)
Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /usr/local/lib/python3.6/dist-packages (from requests&gt;=2.21-&gt;pyconll-&gt;danlp) (3.0.4)
Requirement already satisfied: oauthlib&gt;=3.0.0 in /usr/local/lib/python3.6/dist-packages (from requests-oauthlib&gt;=0.7.0-&gt;tweepy-&gt;danlp) (3.1.0)
Installing collected packages: pyconll, danlp
Successfully installed danlp-0.0.9 pyconll-2.2.1
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">danlp.datasets.wiki_ann</span>
<span class="n">wa</span> <span class="o">=</span> <span class="n">danlp</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">wiki_ann</span><span class="o">.</span><span class="n">_convert_wikiann_to_iob</span><span class="p">(</span><span class="s1">&#39;wikiann-ga.bio&#39;</span><span class="p">,</span> <span class="s1">&#39;wikiann-ga.ner&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>head out
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Colm _ _ B-PER
Ó _ _ I-PER
Ruairc _ _ I-PER

Seosamh _ _ B-PER
Ó _ _ I-PER
Cainín _ _ I-PER

Dónal _ _ B-PER
Ó _ _ I-PER
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>python -m spacy convert -n <span class="m">10</span> wikiann-ga.ner /content/idt-json/
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-fg">ℹ Auto-detected token-per-line NER format</span>
<span class="ansi-blue-fg">ℹ Grouping every 10 sentences into a document.</span>
<span class="ansi-green-fg">✔ Generated output file (757 documents):
/content/idt-json/wikiann-ga.json</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -rf models
<span class="o">!</span>mkdir models
<span class="o">!</span>python -m spacy train -v /content/ga_vectors_cc -p <span class="s1">&#39;tagger,parser,ner&#39;</span> ga models idt-json/ga_idt-ud-train.json idt-json/ga_idt-ud-dev.json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training pipeline: [&#39;tagger&#39;, &#39;parser&#39;]
Starting with blank model &#39;ga&#39;
Loading vector from model &#39;/content/ga_vectors_cc&#39;
Counting training words (limit=0)
/usr/lib/python3.6/runpy.py:193: UserWarning: [W022] Training a new part-of-speech tagger using a model with no lemmatization rules or data. This means that the trained model may not be able to lemmatize correctly. If this is intentional or the language you&#39;re using doesn&#39;t have lemmatization data, you can ignore this warning by setting SPACY_WARNING_IGNORE=W022. If this is surprising, make sure you have the spacy-lookups-data package installed.
  &#34;__main__&#34;, mod_spec)

Itn  Tag Loss    Tag %    Dep Loss    UAS     LAS    Token %  CPU WPS
---  ---------  --------  ---------  ------  ------  -------  -------
  1  14058.829    90.650  43482.222  74.804  56.787  100.000    11293
  2   6188.294    92.810  34097.493  79.836  66.009  100.000    11461
  3   4475.949    93.400  30061.441  81.314  69.572  100.000    11930
  4   3549.242    93.530  27752.841  82.784  71.759  100.000    11719
  5   2916.639    93.570  25861.771  83.066  72.401  100.000    11616
  6   2438.355    93.550  24533.545  83.133  72.726  100.000    12227
  7   2084.913    93.500  22901.218  83.281  73.043  100.000    11842
  8   1845.607    93.610  21836.129  83.516  73.346  100.000    12094
  9   1698.212    93.630  20626.109  83.555  73.507  100.000    11907
 10   1406.626    93.570  19251.761  83.712  73.978  100.000    11926
 11   1366.677    93.620  18882.570  83.896  74.128  100.000    12023
 12   1209.500    93.610  17836.598  83.968  74.177  100.000    11924
 13   1140.886    93.640  17341.624  84.098  74.375  100.000    11522
 14   1043.542    93.670  16748.375  83.992  74.292  100.000    11766
 15    926.876    93.700  15727.938  84.183  74.572  100.000    11931
 16    848.805    93.680  15002.112  84.059  74.427  100.000    11750
 17    857.415    93.760  14686.168  84.075  74.465  100.000    11724
 18    775.277    93.750  14028.872  84.091  74.603  100.000    11890
 19    651.078    93.680  13698.526  84.215  74.794  100.000    11932
 20    672.552    93.670  13036.999  84.356  74.879  100.000    11724
 21    590.244    93.670  12162.862  84.468  75.048  100.000    11851
 22    593.722    93.680  12494.905  84.441  75.122  100.000    11910
 23    582.541    93.660  12110.757  84.351  75.032  100.000    11544
 24    514.448    93.690  11635.750  84.232  74.879  100.000    11984
 25    491.457    93.640  10942.966  84.226  74.816  100.000    12106
 26    521.324    93.660  10958.952  84.232  74.779  100.000    12112
 27    507.717    93.650  10907.860  84.255  74.790  100.000    11754
 28    485.186    93.660  10149.477  84.143  74.666  100.000    11411
 29    507.038    93.720  10331.116  84.165  74.644  100.000    11740
 30    477.966    93.700   9649.121  84.300  74.891  100.000    11300
<span class="ansi-green-fg">✔ Saved model to output directory</span>
models/model-final
<span class="ansi-green-fg">✔ Created best model</span>
models/model-best
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>mkdir modelout
<span class="o">!</span>python -m spacy package --meta meta.json /content/models/model-best modelout
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-fg">✔ Loaded meta.json from file</span>
meta.json
<span class="ansi-green-fg">✔ Successfully created package &#39;ga_idt_lg-1.0.0&#39;</span>
modelout/ga_idt_lg-1.0.0
To build the package, run `python setup.py sdist` in this directory.
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/content/modelout/ga_idt_lg-1.0.0&#39;</span><span class="p">)</span>
<span class="o">!</span>python setup.py sdist
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running sdist
running egg_info
creating ga_idt_lg.egg-info
writing ga_idt_lg.egg-info/PKG-INFO
writing dependency_links to ga_idt_lg.egg-info/dependency_links.txt
writing requirements to ga_idt_lg.egg-info/requires.txt
writing top-level names to ga_idt_lg.egg-info/top_level.txt
writing manifest file &#39;ga_idt_lg.egg-info/SOURCES.txt&#39;
reading manifest file &#39;ga_idt_lg.egg-info/SOURCES.txt&#39;
reading manifest template &#39;MANIFEST.in&#39;
writing manifest file &#39;ga_idt_lg.egg-info/SOURCES.txt&#39;
warning: sdist: standard file not found: should have one of README, README.rst, README.txt, README.md

running check
creating ga_idt_lg-1.0.0
creating ga_idt_lg-1.0.0/ga_idt_lg
creating ga_idt_lg-1.0.0/ga_idt_lg.egg-info
creating ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0
creating ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/parser
creating ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/tagger
creating ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/vocab
copying files to ga_idt_lg-1.0.0...
copying MANIFEST.in -&gt; ga_idt_lg-1.0.0
copying meta.json -&gt; ga_idt_lg-1.0.0
copying setup.py -&gt; ga_idt_lg-1.0.0
copying ga_idt_lg/__init__.py -&gt; ga_idt_lg-1.0.0/ga_idt_lg
copying ga_idt_lg/meta.json -&gt; ga_idt_lg-1.0.0/ga_idt_lg
copying ga_idt_lg.egg-info/PKG-INFO -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg.egg-info/SOURCES.txt -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg.egg-info/dependency_links.txt -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg.egg-info/not-zip-safe -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg.egg-info/requires.txt -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg.egg-info/top_level.txt -&gt; ga_idt_lg-1.0.0/ga_idt_lg.egg-info
copying ga_idt_lg/ga_idt_lg-1.0.0/meta.json -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0
copying ga_idt_lg/ga_idt_lg-1.0.0/tokenizer -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0
copying ga_idt_lg/ga_idt_lg-1.0.0/parser/cfg -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/parser
copying ga_idt_lg/ga_idt_lg-1.0.0/parser/model -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/parser
copying ga_idt_lg/ga_idt_lg-1.0.0/parser/moves -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/parser
copying ga_idt_lg/ga_idt_lg-1.0.0/tagger/cfg -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/tagger
copying ga_idt_lg/ga_idt_lg-1.0.0/tagger/model -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/tagger
copying ga_idt_lg/ga_idt_lg-1.0.0/tagger/tag_map -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/tagger
copying ga_idt_lg/ga_idt_lg-1.0.0/vocab/key2row -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/vocab
copying ga_idt_lg/ga_idt_lg-1.0.0/vocab/lexemes.bin -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/vocab
copying ga_idt_lg/ga_idt_lg-1.0.0/vocab/strings.json -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/vocab
copying ga_idt_lg/ga_idt_lg-1.0.0/vocab/vectors -&gt; ga_idt_lg-1.0.0/ga_idt_lg/ga_idt_lg-1.0.0/vocab
Writing ga_idt_lg-1.0.0/setup.cfg
creating dist
Creating tar archive
removing &#39;ga_idt_lg-1.0.0&#39; (and everything under it)
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat /content/models/model-best/meta.json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  &#34;lang&#34;:&#34;ga&#34;,
  &#34;name&#34;:&#34;model&#34;,
  &#34;version&#34;:&#34;0.0.0&#34;,
  &#34;spacy_version&#34;:&#34;&gt;=2.2.4&#34;,
  &#34;description&#34;:&#34;&#34;,
  &#34;author&#34;:&#34;&#34;,
  &#34;email&#34;:&#34;&#34;,
  &#34;url&#34;:&#34;&#34;,
  &#34;license&#34;:&#34;&#34;,
  &#34;vectors&#34;:{
    &#34;width&#34;:300,
    &#34;vectors&#34;:316836,
    &#34;keys&#34;:316836,
    &#34;name&#34;:&#34;ga_model.vectors&#34;
  },
  &#34;pipeline&#34;:[
    &#34;tagger&#34;,
    &#34;parser&#34;
  ],
  &#34;factories&#34;:{
    &#34;tagger&#34;:&#34;tagger&#34;,
    &#34;parser&#34;:&#34;parser&#34;
  },
  &#34;labels&#34;:{
    &#34;tagger&#34;:[
      &#34;!&#34;,
      &#34;.&#34;,
      &#34;...&#34;,
      &#34;?&#34;,
      &#34;Abr&#34;,
      &#34;Ad&#34;,
      &#34;Adj&#34;,
      &#34;Art&#34;,
      &#34;CM&#34;,
      &#34;CU&#34;,
      &#34;Cmp&#34;,
      &#34;Cmpd&#34;,
      &#34;CmpdNoGen&#34;,
      &#34;Comp&#34;,
      &#34;Cond&#34;,
      &#34;Coord&#34;,
      &#34;Cop&#34;,
      &#34;Cp&#34;,
      &#34;Deg&#34;,
      &#34;Dem&#34;,
      &#34;Det&#34;,
      &#34;Dir&#34;,
      &#34;Foreign&#34;,
      &#34;FutInd&#34;,
      &#34;Gn&#34;,
      &#34;Idf&#34;,
      &#34;Imper&#34;,
      &#34;Inf&#34;,
      &#34;Item&#34;,
      &#34;Itj&#34;,
      &#34;Its&#34;,
      &#34;Loc&#34;,
      &#34;Nm&#34;,
      &#34;Noun&#34;,
      &#34;Num&#34;,
      &#34;PastImp&#34;,
      &#34;PastInd&#34;,
      &#34;Pat&#34;,
      &#34;Pers&#34;,
      &#34;Poss&#34;,
      &#34;Prep&#34;,
      &#34;PresImp&#34;,
      &#34;PresInd&#34;,
      &#34;PresSubj&#34;,
      &#34;Pron&#34;,
      &#34;Punct&#34;,
      &#34;Q&#34;,
      &#34;Ref&#34;,
      &#34;Rel&#34;,
      &#34;Simp&#34;,
      &#34;Subord&#34;,
      &#34;Subst&#34;,
      &#34;Sup&#34;,
      &#34;Temp&#34;,
      &#34;Unknown&#34;,
      &#34;VD&#34;,
      &#34;VI&#34;,
      &#34;VT&#34;,
      &#34;VTI&#34;,
      &#34;Vb&#34;,
      &#34;Voc&#34;,
      &#34;Web&#34;,
      &#34;_SP&#34;,
      &#34;cionn&#34;
    ],
    &#34;parser&#34;:[
      &#34;ROOT&#34;,
      &#34;acl:relcl&#34;,
      &#34;advcl&#34;,
      &#34;advmod&#34;,
      &#34;amod&#34;,
      &#34;appos&#34;,
      &#34;case&#34;,
      &#34;cc&#34;,
      &#34;ccomp&#34;,
      &#34;compound&#34;,
      &#34;conj&#34;,
      &#34;cop&#34;,
      &#34;csubj:cleft&#34;,
      &#34;csubj:cop&#34;,
      &#34;dep&#34;,
      &#34;det&#34;,
      &#34;fixed&#34;,
      &#34;flat&#34;,
      &#34;flat:name&#34;,
      &#34;mark&#34;,
      &#34;mark:prt&#34;,
      &#34;nmod&#34;,
      &#34;nmod:poss&#34;,
      &#34;nsubj&#34;,
      &#34;nummod&#34;,
      &#34;obj&#34;,
      &#34;obl&#34;,
      &#34;obl:prep&#34;,
      &#34;obl:tmod&#34;,
      &#34;parataxis&#34;,
      &#34;punct&#34;,
      &#34;xcomp&#34;,
      &#34;xcomp:pred&#34;
    ]
  },
  &#34;accuracy&#34;:{
    &#34;tags_acc&#34;:92.23,
    &#34;token_acc&#34;:100.0,
    &#34;las&#34;:68.3640850205,
    &#34;uas&#34;:80.5899837362,
    &#34;las_per_type&#34;:{
      &#34;nummod&#34;:{
        &#34;p&#34;:70.0,
        &#34;r&#34;:61.5384615385,
        &#34;f&#34;:65.4970760234
      },
      &#34;root&#34;:{
        &#34;p&#34;:88.0266075388,
        &#34;r&#34;:88.0266075388,
        &#34;f&#34;:88.0266075388
      },
      &#34;case&#34;:{
        &#34;p&#34;:88.8535031847,
        &#34;r&#34;:91.7763157895,
        &#34;f&#34;:90.2912621359
      },
      &#34;obl&#34;:{
        &#34;p&#34;:47.0031545741,
        &#34;r&#34;:54.9815498155,
        &#34;f&#34;:50.6802721088
      },
      &#34;mark:prt&#34;:{
        &#34;p&#34;:71.1538461538,
        &#34;r&#34;:81.9620253165,
        &#34;f&#34;:76.1764705882
      },
      &#34;ccomp&#34;:{
        &#34;p&#34;:40.2777777778,
        &#34;r&#34;:47.5409836066,
        &#34;f&#34;:43.6090225564
      },
      &#34;nsubj&#34;:{
        &#34;p&#34;:75.1824817518,
        &#34;r&#34;:79.7213622291,
        &#34;f&#34;:77.3854244929
      },
      &#34;obj&#34;:{
        &#34;p&#34;:55.5555555556,
        &#34;r&#34;:49.2957746479,
        &#34;f&#34;:52.2388059701
      },
      &#34;nmod&#34;:{
        &#34;p&#34;:52.912142152,
        &#34;r&#34;:54.8618219038,
        &#34;f&#34;:53.8693467337
      },
      &#34;mark&#34;:{
        &#34;p&#34;:82.7715355805,
        &#34;r&#34;:72.6973684211,
        &#34;f&#34;:77.408056042
      },
      &#34;xcomp&#34;:{
        &#34;p&#34;:60.4743083004,
        &#34;r&#34;:65.3846153846,
        &#34;f&#34;:62.8336755647
      },
      &#34;acl:relcl&#34;:{
        &#34;p&#34;:47.2602739726,
        &#34;r&#34;:53.488372093,
        &#34;f&#34;:50.1818181818
      },
      &#34;xcomp:pred&#34;:{
        &#34;p&#34;:44.0476190476,
        &#34;r&#34;:59.6774193548,
        &#34;f&#34;:50.6849315068
      },
      &#34;amod&#34;:{
        &#34;p&#34;:57.5438596491,
        &#34;r&#34;:54.3046357616,
        &#34;f&#34;:55.8773424191
      },
      &#34;det&#34;:{
        &#34;p&#34;:92.8480204342,
        &#34;r&#34;:94.0491591203,
        &#34;f&#34;:93.4447300771
      },
      &#34;csubj:cleft&#34;:{
        &#34;p&#34;:47.2222222222,
        &#34;r&#34;:27.4193548387,
        &#34;f&#34;:34.693877551
      },
      &#34;obl:prep&#34;:{
        &#34;p&#34;:77.6041666667,
        &#34;r&#34;:65.6387665198,
        &#34;f&#34;:71.1217183771
      },
      &#34;advcl&#34;:{
        &#34;p&#34;:54.4,
        &#34;r&#34;:49.2753623188,
        &#34;f&#34;:51.711026616
      },
      &#34;parataxis&#34;:{
        &#34;p&#34;:42.4242424242,
        &#34;r&#34;:27.4509803922,
        &#34;f&#34;:33.3333333333
      },
      &#34;nmod:poss&#34;:{
        &#34;p&#34;:73.4939759036,
        &#34;r&#34;:75.3086419753,
        &#34;f&#34;:74.3902439024
      },
      &#34;cc&#34;:{
        &#34;p&#34;:78.9473684211,
        &#34;r&#34;:79.5454545455,
        &#34;f&#34;:79.2452830189
      },
      &#34;conj&#34;:{
        &#34;p&#34;:42.7609427609,
        &#34;r&#34;:42.0529801325,
        &#34;f&#34;:42.4040066778
      },
      &#34;dep&#34;:{
        &#34;p&#34;:0.0,
        &#34;r&#34;:0.0,
        &#34;f&#34;:0.0
      },
      &#34;compound&#34;:{
        &#34;p&#34;:75.0,
        &#34;r&#34;:26.0869565217,
        &#34;f&#34;:38.7096774194
      },
      &#34;flat&#34;:{
        &#34;p&#34;:64.1025641026,
        &#34;r&#34;:64.9350649351,
        &#34;f&#34;:64.5161290323
      },
      &#34;cop&#34;:{
        &#34;p&#34;:69.3251533742,
        &#34;r&#34;:70.625,
        &#34;f&#34;:69.9690402477
      },
      &#34;flat:name&#34;:{
        &#34;p&#34;:63.4782608696,
        &#34;r&#34;:51.4084507042,
        &#34;f&#34;:56.8093385214
      },
      &#34;obl:tmod&#34;:{
        &#34;p&#34;:66.6666666667,
        &#34;r&#34;:2.7397260274,
        &#34;f&#34;:5.2631578947
      },
      &#34;advmod&#34;:{
        &#34;p&#34;:66.2745098039,
        &#34;r&#34;:65.0,
        &#34;f&#34;:65.6310679612
      },
      &#34;appos&#34;:{
        &#34;p&#34;:21.9512195122,
        &#34;r&#34;:20.9302325581,
        &#34;f&#34;:21.4285714286
      },
      &#34;flat:foreign&#34;:{
        &#34;p&#34;:0.0,
        &#34;r&#34;:0.0,
        &#34;f&#34;:0.0
      },
      &#34;fixed&#34;:{
        &#34;p&#34;:74.7663551402,
        &#34;r&#34;:61.0687022901,
        &#34;f&#34;:67.2268907563
      },
      &#34;csubj:cop&#34;:{
        &#34;p&#34;:62.5,
        &#34;r&#34;:55.5555555556,
        &#34;f&#34;:58.8235294118
      },
      &#34;discourse&#34;:{
        &#34;p&#34;:0.0,
        &#34;r&#34;:0.0,
        &#34;f&#34;:0.0
      },
      &#34;case:voc&#34;:{
        &#34;p&#34;:0.0,
        &#34;r&#34;:0.0,
        &#34;f&#34;:0.0
      },
      &#34;vocative&#34;:{
        &#34;p&#34;:0.0,
        &#34;r&#34;:0.0,
        &#34;f&#34;:0.0
      }
    }
  },
  &#34;speed&#34;:{
    &#34;cpu&#34;:13038.7132631094,
    &#34;gpu&#34;:null,
    &#34;nwords&#34;:10000
  }
}</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/content&#39;</span><span class="p">)</span>
<span class="o">!</span>rm -rf modelout
<span class="o">!</span>mkdir modelout
<span class="o">!</span>rm meta.json
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat meta.json
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  &#34;name&#34;: &#34;ga_idt_sm&#34;,
  &#34;lang&#34;: &#34;ga&#34;,
  &#34;version&#34;: &#34;1.0.0&#34;,
  &#34;spacy_version&#34;: &#34;&gt;=2.0.0,&lt;3.0.0&#34;,
  &#34;description&#34;: &#34;Irish model for spaCy trained on IDT&#34;,
  &#34;author&#34;: &#34;Jim O&#39;Regan&#34;,
  &#34;email&#34;: &#34;jaoregan@tcd.ie&#34;,
  &#34;license&#34;: &#34;CC BY-SA 3.0&#34;,
  &#34;pipeline&#34;: [&#34;tagger&#34;, &#34;parser&#34;, &#34;ner&#34;]
}
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="jimregan/notes"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/notes/spacy/idt/2020/09/14/train-spacy-idt.html" hidden></a>
</article>

      </div>
    </main><link id="fa-stylesheet" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">

<footer class="site-footer h-card">
  <data class="u-url" value="/notes/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
      </div>
      <div class="footer-col">
        <p>Things I know I&#39;ll forget</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list">
  <li>
    <a href="https://jimregan.github.io/notes/feed.xml" target="_blank" title="Subscribe to syndication feed">
      <svg class="svg-icon grey" viewbox="0 0 16 16">
        <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
          11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
          13.806c0-1.21.983-2.195 2.194-2.195zM10.606
          16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
        />
      </svg>
    </a>
  </li>
</ul>
</div>

  </div>

</footer>

</body>

</html>
