<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Compare ctmedit | notes</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Compare ctmedit" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Don’t remember what I was doing here" />
<meta property="og:description" content="Don’t remember what I was doing here" />
<link rel="canonical" href="https://jimregan.github.io/notes/ctmedit/reverb-asr/hsi/2024/10/11/compare-ctmedit.html" />
<meta property="og:url" content="https://jimregan.github.io/notes/ctmedit/reverb-asr/hsi/2024/10/11/compare-ctmedit.html" />
<meta property="og:site_name" content="notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-10-11T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://jimregan.github.io/notes/ctmedit/reverb-asr/hsi/2024/10/11/compare-ctmedit.html","@type":"BlogPosting","headline":"Compare ctmedit","dateModified":"2024-10-11T00:00:00-05:00","datePublished":"2024-10-11T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jimregan.github.io/notes/ctmedit/reverb-asr/hsi/2024/10/11/compare-ctmedit.html"},"description":"Don’t remember what I was doing here","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/notes/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jimregan.github.io/notes/feed.xml" title="notes" /><link rel="shortcut icon" type="image/x-icon" href="/notes/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/notes/">notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/notes/about/">About Me</a><a class="page-link" href="/notes/search/">Search</a><a class="page-link" href="/notes/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Compare ctmedit</h1><p class="page-description">Don't remember what I was doing here</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2024-10-11T00:00:00-05:00" itemprop="datePublished">
        Oct 11, 2024
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      10 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/notes/categories/#ctmedit">ctmedit</a>
        &nbsp;
      
        <a class="category-tags-link" href="/notes/categories/#reverb-asr">reverb-asr</a>
        &nbsp;
      
        <a class="category-tags-link" href="/notes/categories/#hsi">hsi</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/jimregan/notes/tree/master/_notebooks/2024-10-11-compare-ctmedit.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/notes/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/jimregan/notes/master?filepath=_notebooks%2F2024-10-11-compare-ctmedit.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/notes/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/jimregan/notes/blob/master/_notebooks/2024-10-11-compare-ctmedit.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/notes/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2024-10-11-compare-ctmedit.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">import</span> <span class="nn">pocketsphinx</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">textgrids</span><span class="o">=</span><span class="s2">&quot;/Users/joregan/Playing/hsi/audio/whisperx-textgrids/&quot;</span>
<span class="n">ctmdir</span><span class="o">=</span><span class="s2">&quot;/Users/joregan/Playing/hsi/ctc_prefix_beam_search/&quot;</span>
<span class="n">ctmeditdir</span><span class="o">=</span><span class="s2">&quot;/Users/joregan/Playing/hsi/whisper_reverb_ctmedit/&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">def</span> <span class="nf">read_ctm</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Path</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">ctmlines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">inf</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inf</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">ctmlines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">ctmlines</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">praatio</span> <span class="kn">import</span> <span class="n">textgrid</span>

<span class="k">def</span> <span class="nf">read_textgrid</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">tiername</span><span class="o">=</span><span class="s2">&quot;words&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Path</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">tg</span> <span class="o">=</span> <span class="n">textgrid</span><span class="o">.</span><span class="n">openTextgrid</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">utterances</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tier</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">getTier</span><span class="p">(</span><span class="n">tiername</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">utterances</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">text</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">utterances</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">tgpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">textgrids</span><span class="p">)</span>
<span class="n">ctmpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">ctmdir</span><span class="p">)</span>
<span class="n">ctmeditpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">ctmeditdir</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">EG</span> <span class="o">=</span> <span class="s2">&quot;hsi_5_0718_210_001_main&quot;</span>
<span class="n">CTMEDATA</span> <span class="o">=</span> <span class="n">read_ctm</span><span class="p">(</span><span class="n">ctmeditpath</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">EG</span><span class="si">}</span><span class="s2">.ctmedit&quot;</span><span class="p">)</span>
<span class="n">TGDATA</span> <span class="o">=</span> <span class="n">read_textgrid</span><span class="p">(</span><span class="n">tgpath</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">EG</span><span class="si">}</span><span class="s2">.TextGrid&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">clean_word</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;.,;:!?&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">map_words_to_tg</span><span class="p">(</span><span class="n">tgdata</span><span class="p">):</span>
    <span class="n">mappings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tgdata</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">):</span>
            <span class="n">clean</span> <span class="o">=</span> <span class="n">clean_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
            <span class="n">mappings</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">clean</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">num</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">mappings</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">ctm_excerpt</span><span class="p">(</span><span class="n">ctmdata</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">fluff</span><span class="o">=</span><span class="mf">0.6</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">end</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">end</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
    
    <span class="n">excerpt</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ctmline</span> <span class="ow">in</span> <span class="n">ctmdata</span><span class="p">:</span>
        <span class="n">cstart</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ctmline</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">cdur</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ctmline</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">cend</span> <span class="o">=</span> <span class="n">cstart</span> <span class="o">+</span> <span class="n">cdur</span>
        <span class="k">if</span> <span class="n">cstart</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">fluff</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cend</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">end</span> <span class="o">+</span> <span class="n">fluff</span><span class="p">):</span>
            <span class="k">break</span>
        <span class="n">excerpt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctmline</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">excerpt</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">index_ctmdata_by_start</span><span class="p">(</span><span class="n">ctmdata</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]):</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ctmdata</span><span class="p">)}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">index_ctmdata_by_start</span><span class="p">(</span><span class="n">CTMEDATA</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">ctm_excerpt</span><span class="p">(</span><span class="n">CTMEDATA</span><span class="p">,</span> <span class="mf">57.734</span><span class="p">,</span> <span class="mf">60.576</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[[&#39;hsi_5_0718_210_001_main.wav&#39;, &#39;1&#39;, &#39;57.33&#39;, &#39;0.1&#39;, &#39;i&#39;, &#39;0.00&#39;, &#39;-&#39;, &#39;ins&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;, &#39;1&#39;, &#39;57.57&#39;, &#39;0.1&#39;, &#39;i&#39;, &#39;0.00&#39;, &#39;i&#39;, &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;57.85&#39;,
  &#39;0.1&#39;,
  &#39;really&#39;,
  &#39;0.00&#39;,
  &#39;really&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;58.01&#39;,
  &#39;0.1&#39;,
  &#39;think&#39;,
  &#39;0.00&#39;,
  &#39;think&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;58.17&#39;,
  &#39;0.26&#39;,
  &#34;i&#39;ve&#34;,
  &#39;0.00&#39;,
  &#34;i&#39;ve&#34;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;58.53&#39;,
  &#39;0.1&#39;,
  &#39;made&#39;,
  &#39;0.00&#39;,
  &#39;made&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;58.77&#39;,
  &#39;0.1&#39;,
  &#39;the&#39;,
  &#39;0.00&#39;,
  &#39;the&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;58.93&#39;,
  &#39;0.1&#39;,
  &#39;best&#39;,
  &#39;0.00&#39;,
  &#39;best&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;59.03&#39;,
  &#39;0.0&#39;,
  &#39;-&#39;,
  &#39;1.0&#39;,
  &#39;out&#39;,
  &#39;del&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;59.37&#39;,
  &#39;0.1&#39;,
  &#39;outta&#39;,
  &#39;0.00&#39;,
  &#39;of&#39;,
  &#39;sub&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;59.65&#39;,
  &#39;0.1&#39;,
  &#39;this&#39;,
  &#39;0.00&#39;,
  &#39;this&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;59.85&#39;,
  &#39;0.1&#39;,
  &#39;place&#39;,
  &#39;0.00&#39;,
  &#39;place&#39;,
  &#39;cor&#39;],
 [&#39;hsi_5_0718_210_001_main.wav&#39;,
  &#39;1&#39;,
  &#39;60.13&#39;,
  &#39;0.18&#39;,
  &#39;actually&#39;,
  &#39;0.00&#39;,
  &#39;actually&#39;,
  &#39;cor&#39;]]</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">namethis</span><span class="p">(</span><span class="n">ctmedit</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">consumed_from</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">index_ctmdata_by_start</span><span class="p">(</span><span class="n">ctmedit</span><span class="p">)</span>
    <span class="n">excerpt</span> <span class="o">=</span> <span class="n">ctm_excerpt</span><span class="p">(</span><span class="n">ctmedit</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    <span class="n">ex_start</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">excerpt</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">ex_start_ptr</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="n">ex_start</span><span class="p">]</span>
    <span class="c1"># if (ex_start_ptr - 1) &gt; consumed_from:</span>
    <span class="c1">#     # extend here?</span>
    <span class="c1">#     pass</span>
    <span class="n">prev_start</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">CTMEDATA</span><span class="p">[</span><span class="n">ex_start_ptr</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">prev_start</span><span class="p">,</span> <span class="n">ex_start</span><span class="p">,</span> <span class="n">CTMEDATA</span><span class="p">[</span><span class="n">ex_start_ptr</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">namethis</span><span class="p">(</span><span class="n">CTMEDATA</span><span class="p">,</span> <span class="mf">57.734</span><span class="p">,</span> <span class="mf">60.576</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>56.91 57.33 [&#39;hsi_5_0718_210_001_main.wav&#39;, &#39;1&#39;, &#39;56.91&#39;, &#39;0.04&#39;, &#39;think&#39;, &#39;0.00&#39;, &#39;think&#39;, &#39;cor&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">TGDATA</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[(7.489, 7.709, &#39;Yeah.&#39;),
 (7.729, 8.19, &#39;Yeah.&#39;),
 (8.21, 8.49, &#39;Yes.&#39;),
 (40.339, 41.12, &#39;Oh, that was nice.&#39;),
 (41.461, 42.622, &#39;Nice idea to have that.&#39;),
 (44.164, 45.025, &#39;Oh, I like this place.&#39;),
 (55.393, 57.114, &#39;Yeah, so what do you think?&#39;),
 (57.734,
  60.576,
  &#34;I really think I&#39;ve made the best out of this place actually.&#34;),
 (62.837, 63.038, &#39;Sorry?&#39;),
 (63.918,
  72.263,
  &#34;Yeah, it does and I really like what I did with the flowers up there because it&#39;s like the hanging gardens of Babylon.&#34;),
 (73.604, 77.026, &#39;I would like to have more of course, but I think in time&#39;),
 (78.106, 82.527, &#39;They will hang down like a waterfall of green leaves.&#39;),
 (83.368,
  88.609,
  &#34;That&#39;s my intention anyway because I&#39;m really into plants.&#34;),
 (90.149,
  98.892,
  &#34;What&#39;s nice with these plants too, that&#39;s called the tongue of mother-in-law, the one by the window in Swedish.&#34;),
 (100.792, 103.194, &#34;Because it&#39;s called Dragon Tongue.&#34;),
 (104.174,
  110.498,
  &#39;And your mother-in-law, in the old way, everyone thought their mother-in-law was a dragon.&#39;),
 (112.239, 113.62, &#39;It was called Mother-in-law Tongue.&#39;),
 (114.14, 116.081, &#39;And that, of course, is Monstera.&#39;),
 (117.022, 117.642, &#39;A new one.&#39;),
 (118.622, 123.145, &#39;I actually bought it from the Amazons.&#39;),
 (124.266,
  129.769,
  &#34;So it&#39;s brought here by a friend as just a little, little cuddling.&#34;),
 (130.922, 133.284, &#39;And now it looks like that.&#39;),
 (133.845, 136.848, &#34;And that&#39;s only in three months.&#34;),
 (137.068, 140.272, &#39;So I have to say I have green fingers.&#39;),
 (140.572, 142.434, &#39;And yes.&#39;),
 (143.595, 145.898, &#39;And do you wonder about the kettle I have there?&#39;),
 (148.234, 149.635, &#34;Yes, but it&#39;s not actually.&#34;),
 (150.915, 153.917, &#39;Because when you boil water, you clean it.&#39;),
 (155.498,
  161.941,
  &#39;And if you want the plants to grow properly, you want the water to be as clean as possible.&#39;),
 (162.321,
  166.883,
  &#39;But of course, you also take out the nourishment in the water.&#39;),
 (167.023, 171.906, &#39;So you have to add nourishment, fertilizers and so.&#39;),
 (173.246, 176.648, &#34;But it&#39;s really important to have clean water.&#34;),
 (177.488,
  184.871,
  &#39;And then I let it stand there for two or three weeks and then I put it in regular water.&#39;),
 (186.172,
  192.815,
  &#39;Just one deciliter of pure water and then not dirty water, but regular tap water.&#39;),
 (197.077, 197.517, &#39;The pillows?&#39;),
 (198.817, 200.398, &#39;Oh, I thought you pointed that way.&#39;),
 (201.859, 202.339, &#39;Those pillows?&#39;),
 (202.879, 203.219, &#39;Yes.&#39;),
 (204.22, 204.32, &#39;Oh!&#39;),
 (206.042,
  212.584,
  &#34;I&#39;m glad you like them because those are really, really meaning a lot to me.&#34;),
 (213.805, 215.806, &#39;They used to belong to my grandmother.&#39;),
 (216.946,
  223.108,
  &#39;And I have so many memories of them, with them, together with them.&#39;),
 (223.148,
  229.731,
  &#34;Because, you know, every time I was with my... We didn&#39;t watch much TV in those days because I&#39;m 60 years old.&#34;),
 (229.811, 231.471, &#39;So we, after...&#39;),
 (234.876,
  238.538,
  &#34;It wasn&#39;t like today when you can watch TV all day or Netflix or anything.&#34;),
 (239.119,
  242.762,
  &#39;So we played a lot of games and we also listened to the radio.&#39;),
 (244.263,
  251.949,
  &#39;And whenever, or my grandmother would tell me stories from her childhood, and then I always sat on the floor.&#39;),
 (253.03,
  260.176,
  &#39;So I sat on one of the pillows and then I, the white one, and then I had the green one.&#39;),
 (260.896,
  282.635,
  &#39;like this and I would listen to her because they lived up north and it was so exciting to listen to her stories about reindeers and stuff like that and they also she she also believed in she was very spiritual so she believed in maybe not spirits but that energies remained&#39;),
 (285.618, 286.118, &#39;around us.&#39;),
 (286.819, 292.123, &#39;So I actually feel that my grandmother is with me.&#39;),
 (293.544, 296.927, &#39;Oh, my hair stands when I talk about her.&#39;),
 (297.167, 299.529, &#34;So maybe she&#39;s here now and likes this.&#34;),
 (301.971, 304.033, &#34;So I&#39;m glad you like them.&#34;),
 (308.977, 309.257, &#39;The what?&#39;),
 (315.906,
  328.944,
  &#34;uh yeah maybe it&#39;s just as you can see i very often i just come home throw off my shoes and i i just want to go in and relax and&#34;),
 (331.687,
  346.876,
  &#34;So you don&#39;t need my watch so I put it over there and I okay it&#39;s like this I have ADHD so sometimes I just put something down and then I forget that I&#39;ve put it down so&#34;),
 (355.356, 356.216, &#39;What would be?&#39;),
 (357.958, 358.599, &#39;Yes, of course.&#39;),
 (360.321,
  366.887,
  &#34;And I always look for it because sometimes it&#39;s going beneath the cushion.&#34;),
 (371.231, 371.632, &#39;This one?&#39;),
 (377.597,
  382.982,
  &#39;Yes, because I understand what you mean, because you would like the chair to be this way.&#39;),
 (383.943,
  391.91,
  &#34;But there&#39;s a very good explanation for it, because have you heard of an artist called Benjamin Kokomovic?&#34;),
 (392.871, 393.291, &#34;You haven&#39;t?&#34;),
 (393.912, 397.815, &#39;Oh, he was very much into spirituality.&#39;),
 (398.876,
  414.833,
  &#39;And what he said was that if you place a chair like that, in that direction, right into a wall, you can actually attract spirits.&#39;),
 (416.214, 418.557, &#34;And so that&#39;s why it&#39;s like that.&#34;),
 (422.273,
  431.618,
  &#34;Yes, because, okay, I don&#39;t know if you&#39;re into this, but actually, I am very much in contact with the other world.&#34;),
 (432.318,
  450.908,
  &#39;So what happens is, because this chair is really special, it once belonged to a great psychic, a Swedish psychic, and whenever someone comes to visit me, the light goes tick, tick, tick, tick.&#39;),
 (452.249,
  461.817,
  &#34;And so I know they&#39;re there and sometimes I ask them, is it right if I join you?&#34;),
 (462.658, 463.659, &#34;Sometimes it&#39;s not.&#34;),
 (463.819, 467.923, &#39;So one blink is yes, two blinks is no.&#39;),
 (468.303, 470.565, &#39;But if I, what do you think I do then?&#39;),
 (473.855, 476.897, &#34;No, if it&#39;s okay, what do you think I do?&#34;),
 (478.478, 480.519, &#39;Yes, when I join them, what do you think I do then?&#39;),
 (481.979, 483.18, &#39;What I told you in the beginning?&#39;),
 (485.321, 486.462, &#39;I take the pillows.&#39;),
 (487.502,
  493.726,
  &#39;So I sit like when I sat with my grandmother, so I sit on the white one and have the green one like this.&#39;),
 (502.306,
  524.157,
  &#34;I know what you... I know it might look a bit strange but actually it&#39;s... I used to have the plant over there so it&#39;s a UV light but then of course when I bought that chair I had to ask the chair actually where it wanted to be&#34;),
 (524.837,
  553.0,
  &#34;and it wanted to be there so and I haven&#39;t moved the lamp yet but it should be and as you see it&#39;s I am now taking away the UV light because I have two similar lights up there my god I forgot about those I never use them actually well and now when you tell me when you&#39;re noticing it it looks quite off in this room&#34;),
 (559.825, 560.646, &#39;To the lamps?&#39;),
 (561.927,
  567.013,
  &#39;No, but now that you mention it, it actually looked like the belt of Orion.&#39;),
 (570.056,
  573.659,
  &#34;Maybe there is something I&#39;ve done without thinking about it.&#34;),
 (574.0, 576.442, &#39;I really have to check that before I take them down.&#39;),
 (576.562, 579.926, &#39;But they were very expensive, those lamps.&#39;),
 (580.146, 581.948, &#34;They&#39;re from Germany, actually.&#34;),
 (586.606,
  594.651,
  &#34;Yes, because I&#39;m not, as you can see, I&#39;m not very much into art.&#34;),
 (595.672, 596.652, &#39;The other walls are empty.&#39;),
 (598.253, 601.255, &#39;So I just have the one with the flowers.&#39;),
 (604.357, 609.401, &#39;So if I feel something for a painting, then I buy it.&#39;),
 (609.861, 611.662, &#34;So that&#39;s what I really felt for.&#34;),
 (612.323, 615.245, &#34;And I love the tree over there because it&#39;s so&#34;),
 (617.748, 620.232, &#34;It&#39;s like, have you seen the film Matrix?&#34;),
 (620.894,
  626.202,
  &#39;Yeah, you know, in the room where they study martial arts and stuff like that.&#39;),
 (626.723, 627.364, &#34;I think that&#39;s&#34;),
 (629.72,
  635.925,
  &#39;I could imagine when we die that we come to a place like that at first.&#39;),
 (637.126, 637.366, &#39;Sorry?&#39;),
 (638.427, 640.368, &#39;Yeah, or tree of death.&#39;),
 (641.109,
  649.956,
  &#34;And maybe it&#39;s, it looks really peaceful, but could also be a tree of wisdom and stuff like that.&#34;),
 (652.597, 653.518, &#39;And that one,&#39;),
 (654.959, 658.224, &#39;is also one of my grandmothers.&#39;),
 (658.284,
  672.402,
  &#34;It&#39;s not what I like, like in art, but I like that one because when I was a kid, I used to sit in front of it and imagine that I was living there.&#34;),
 (673.343,
  693.133,
  &#34;and that it was my dad, because my parents were divorced and I never met my dad, and that my dad was waiting for me, because you can see that there&#39;s one horse without anyone on it, and that he was waiting for me to come there, and that my mother was driving that carriage.&#34;),
 (697.6, 699.2, &#39;Yeah, yeah it is.&#39;),
 (700.26,
  706.502,
  &#39;And I like an open space because I can do my morning yoga here and yeah.&#39;),
 (707.922,
  725.165,
  &#34;And it&#39;s also from, it&#39;s from Cairo in Egypt and it was, it actually, the symbols here means that that&#39;s the afterlife and the life we&#39;re in now.&#34;),
 (726.306,
  734.345,
  &#34;and all the various... My God, there&#39;s something wrong with my hand, I have to... Yeah.&#34;)]</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">partition_ctm</span><span class="p">(</span><span class="n">ctmdata</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="n">segments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">current</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">prev</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">ctmline</span> <span class="ow">in</span> <span class="n">ctmdata</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ctmline</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">end</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ctmline</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="n">start</span>
        <span class="k">if</span> <span class="n">prev</span> <span class="o">&gt;</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">prev</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">amount</span><span class="p">:</span>
            <span class="n">segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
            <span class="n">current</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">current</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctmline</span><span class="p">)</span>
    <span class="n">segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">segments</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">partitioned</span> <span class="o">=</span> <span class="n">partition_ctm</span><span class="p">(</span><span class="n">CTMEDATA</span><span class="p">)</span>
<span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitioned</span><span class="p">:</span>
    <span class="n">edit_type</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ctmline</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">:</span>
        <span class="n">edit_type</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ctmline</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">edit_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">partitioned</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;hsi_5_0718_210_001_main.wav&#39;,
 &#39;1&#39;,
 &#39;734.04&#39;,
 &#39;0.1&#39;,
 &#39;yeah&#39;,
 &#39;0.00&#39;,
 &#39;yeah&#39;,
 &#39;cor&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/notes/ctmedit/reverb-asr/hsi/2024/10/11/compare-ctmedit.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/notes/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://jimregan.github.io/notes/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/notes/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Things I know I&#39;ll forget</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
